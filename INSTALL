Gale installation directions
----------------------------

See http://ofb.net/~egnor/gale/ for more information on Gale.
You can get the latest distribution from http://ofb.net/~egnor/gale.tar.gz.

For the most part, installing Gale is a matter of building the binaries and
getting them in the right places.  The exception is the authentication system,
which requires a certain amount of finicky setup -- including setuid binaries 
-- to do its job correctly and securely.

0. Make sure you have GNU Make version 3.67 or better.  Older versions might
   work, but I can't swear to it.  You can get it by anonymous FTP from
   prep.ai.mit.edu in the /pub/gnu directory.  You can't build Gale with a
   non-GNU 'make' utility, sorry.

1. Get the RSAREF library.  You can retrieve the source from ftp.rsa.com, if 
   you live in the US or Canada.  It you don't, you might try using a workalike
   such as RSAEURO.

   Unpack the rsaref20.tar.Z file in the "gale/rsaref" directory.  The 
   configuration and build process will automatically detect its presence, 
   build it and link with it.  This will only work with "genuine" RSAREF.

   Alternatively, you can build the library (or a workalike) yourself.
   If you do, install librsaref.a and the RSAREF headers into system lib and 
   include directories; remember where you put them for the next step.

2. Prepare to run the provided "configure" script.  The typical "configure" 
   options (--prefix etc.) apply; run "sh configure --help" for usage 
   information.  

   If you want to build the gzgw (gale/Zephyr gateway), you need to make sure 
   "configure" can find the Zephyr libraries and headers by using the proper 
   -L and -I flags (if necessary) in the LDFLAGS and CPPFLAGS environment 
   variables, respectively.

   If you want to use a preinstalled RSAREF library, include the appropriate
   flags in LDFLAGS and CPPFLAGS so "configure" can find librsaref.a and the 
   RSAREF headers (rsaref.h etc).  (Don't worry about this if you've unpacked 
   rsaref20.tar.Z into gale/rsaref as directed in step 1.)

   Once you've figured out the right options and set environment variables
   as needed, run the script.

3. Run GNU make ("gmake" or "make" or however it's installed) in the top-level
   Gale directory.  With luck, this will build everything without incident.
   If not, now you get to figure out what went wrong and why; enjoy!
   Feel free to contact me (egnor@ofb.net) with questions.  Many architectures
   are currently unsupported, but the changes are typically not too painful.

4. Become a user (eg. "root") which has permission to write/create the
   install directories (/usr/local/..., unless you specified otherwise).  
   Make "install" from the top-level Gale directory; this should install 
   the Gale binaries, libraries, and header files.

   This may ask questions if it can't find a previous configuration.
   Follow the directions; feel free to interrupt it at any prompt if you
   need to change something and make "install" again.

   Make sure the installed binaries are on the PATH for future steps!

5. If you have not already set up your domain, you need to do so.
   Become the "gale user" you selected in step 4 and run "make domain".
   Follow the directions; these will involve sending your key to the
   proper authority to get it signed.  I manage ROOT and most of the top-level
   domains (.edu, .com, etc.) for now.  When in doubt, you can ask me.

6. Happy puffing!
